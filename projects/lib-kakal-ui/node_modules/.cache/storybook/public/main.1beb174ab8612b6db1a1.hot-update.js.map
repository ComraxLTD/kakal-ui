{"version":3,"file":"main.1beb174ab8612b6db1a1.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;;;;;;;;;;;;;;;;;;;ACzMA;AAEA;AAMA;AAOA;AAFA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAhBA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AALA;AAJA;AACA;AACA;AACA;;AACA;AAAA;;;;;;;;;;;;;;;;;;ACRA;AACA;AAUA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAIA;AACA;AAIA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAKA;AACA;AAEA;AACA;AACA;AAvDA;AAHA;AACA;AACA;;AACA;AAAA","sources":["webpack://lib-kakal-ui/./src/lib/stories/Table.stories.ts","webpack://lib-kakal-ui/./src/lib/app/components/columns/column-filter/column-filter.component.ts","webpack://lib-kakal-ui/./src/lib/app/components/columns/columns.service.ts"],"sourcesContent":["\n    /* eslint-disable */\n    // @ts-nocheck\n    // @ts-ignore\n    var __STORY__ = \"import { moduleMetadata, Story, Meta } from '@storybook/angular';\\r\\nimport { CommonModule, DatePipe, DecimalPipe } from '@angular/common';\\r\\n\\r\\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\\r\\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\\r\\nimport { NgxPaginationModule, PaginationInstance } from 'ngx-pagination';\\r\\nimport { ColumnFilterComponent } from '../app/components/columns/column-filter/column-filter.component';\\r\\nimport { ColumnFormComponent } from '../app/components/columns/column-form/column-form.component';\\r\\nimport { ColumnsService } from '../app/components/columns/columns.service';\\r\\nimport { FormService } from '../app/components/form/services/form.service';\\r\\nimport { PaginationComponent } from '../app/components/pagination/pagination.component';\\r\\nimport { StatusComponent } from '../app/components/status/status.component';\\r\\nimport { TableComponent } from '../app/components/table/table.component';\\r\\nimport { TableService } from '../app/components/table/table.service';\\r\\nimport { TypographyComponent } from '../app/components/typography/typography.component';\\r\\nimport { TableExComponent } from '../app/examples/table-ex/table-ex.component';\\r\\nimport { ClassesDirective } from '../app/utilities/directives/classes.directive';\\r\\nimport { AssetsModel } from '../app/utilities/models/assets.model';\\r\\nimport { AreaPipe } from '../app/utilities/pipes/area.pipe';\\r\\nimport { FormatPipe } from '../app/utilities/pipes/format.pipe';\\r\\nimport { MaterialModule } from '../material/material.module';\\r\\nimport { ColumnModel } from '../app/components/columns/column.model';\\r\\n\\r\\nexport default {\\r\\n  title: 'Table',\\r\\n  component: TableExComponent,\\r\\n  decorators: [\\r\\n    moduleMetadata({\\r\\n      declarations: [\\r\\n        TableComponent,\\r\\n        StatusComponent,\\r\\n        ColumnFilterComponent,\\r\\n        ColumnFormComponent,\\r\\n        PaginationComponent,\\r\\n        TypographyComponent,\\r\\n        ClassesDirective,\\r\\n        FormatPipe,\\r\\n        AreaPipe,\\r\\n      ],\\r\\n      providers: [\\r\\n        FormService,\\r\\n        TableService,\\r\\n        ColumnsService,\\r\\n        FormatPipe,\\r\\n        AreaPipe,\\r\\n        DatePipe,\\r\\n        DecimalPipe,\\r\\n      ],\\r\\n      imports: [\\r\\n        ReactiveFormsModule,\\r\\n        BrowserAnimationsModule,\\r\\n        FormsModule,\\r\\n        CommonModule,\\r\\n        NgxPaginationModule,\\r\\n        MaterialModule,\\r\\n      ],\\r\\n    }),\\r\\n  ],\\r\\n} as Meta;\\r\\n\\r\\nconst Template: Story<TableExComponent<any>> = (\\r\\n  args: TableExComponent<any>\\r\\n) => ({\\r\\n  props: args,\\r\\n});\\r\\n\\r\\nconst pagination: PaginationInstance = {\\r\\n  itemsPerPage: 6,\\r\\n  currentPage: 1,\\r\\n  totalItems: 12,\\r\\n};\\r\\n\\r\\nconst { data, columns, options } = {\\r\\n  data: [\\r\\n    {\\r\\n      id: 20,\\r\\n      block: 20,\\r\\n      division: 10,\\r\\n      subdivision: 0,\\r\\n      area: 2692,\\r\\n      areaOwn: 748,\\r\\n      property: '',\\r\\n      status: {\\r\\n        label: 'ממתין לטיפול עורך דין',\\r\\n        value: 4,\\r\\n      },\\r\\n      description: '',\\r\\n      location: 'קריית שמונה',\\r\\n    },\\r\\n    {\\r\\n      id: 20,\\r\\n      block: 20,\\r\\n      division: 20,\\r\\n      subdivision: 0,\\r\\n      area: 2692,\\r\\n      areaOwn: null,\\r\\n      property: '',\\r\\n      status: {\\r\\n        label: 'שוריין ע\\\"י פיננסים',\\r\\n        value: 5,\\r\\n      },\\r\\n      description: '',\\r\\n      location: 'קריית שמונה',\\r\\n    },\\r\\n    {\\r\\n      id: 24,\\r\\n      block: 24,\\r\\n      division: 20,\\r\\n      subdivision: 0,\\r\\n      area: 2692,\\r\\n      areaOwn: null,\\r\\n      property: '',\\r\\n      status: {\\r\\n        label: 'ממתין לרו\\\"ח',\\r\\n        value: 3,\\r\\n      },\\r\\n      description: '',\\r\\n      location: 'קריית שמונה',\\r\\n    },\\r\\n    {\\r\\n      id: 20,\\r\\n      block: 20,\\r\\n      division: 54,\\r\\n      subdivision: 0,\\r\\n      area: 1037,\\r\\n      areaOwn: null,\\r\\n      property: '',\\r\\n      status: {\\r\\n        label: 'התקבלה עסקה חדשה',\\r\\n        value: 1,\\r\\n      },\\r\\n      description: '',\\r\\n      location: 'קריית שמונה',\\r\\n    },\\r\\n    {\\r\\n      id: 20,\\r\\n      block: 20,\\r\\n      division: 20,\\r\\n      subdivision: 0,\\r\\n      area: 680,\\r\\n      areaOwn: null,\\r\\n      property: '',\\r\\n      status: {\\r\\n        label: 'ממתין לפיננסים',\\r\\n        value: 1,\\r\\n      },\\r\\n      description: '',\\r\\n      location: 'קריית שמונה',\\r\\n    },\\r\\n    {\\r\\n      id: 20,\\r\\n      block: 20,\\r\\n      division: 20,\\r\\n      subdivision: 0,\\r\\n      area: 2692,\\r\\n      areaOwn: 748,\\r\\n      property: '',\\r\\n      status: {\\r\\n        label: 'ממתין לטיפול עורך דין',\\r\\n        value: 4,\\r\\n      },\\r\\n      description: '',\\r\\n      location: 'קריית שמונה',\\r\\n    },\\r\\n  ],\\r\\n  columns: [\\r\\n    new ColumnModel({ label: 'גוש', type: 'number' }),\\r\\n    new ColumnModel({ label: 'חלקה', type: 'number' }),\\r\\n    new ColumnModel({ label: 'תת חלקה', type: 'number' }),\\r\\n    new ColumnModel({ label: 'שטח מ\\\"ר', type: 'number' }),\\r\\n    new ColumnModel({ label: 'שטח בבעלות הימנותא', type: 'number' }),\\r\\n    new ColumnModel({ label: 'זכות במס', type: 'text' }),\\r\\n    new ColumnModel({ label: 'סטטוס', type: 'custom', center: true }),\\r\\n    new ColumnModel({ label: 'תיאור', type: 'text' }),\\r\\n    new ColumnModel({ label: 'יישוב', type: 'text' }),\\r\\n  ],\\r\\n  options: {\\r\\n    pagination: pagination,\\r\\n    filters: ['id', '_constructor-name_'],\\r\\n  },\\r\\n};\\r\\n\\r\\nexport const Default = Template.bind({});\\r\\nDefault.args = {\\r\\n  data: data,\\r\\n  columns: columns,\\r\\n  model: new AssetsModel(),\\r\\n  options: options,\\r\\n};\\r\\n\\r\\n\";\n    // @ts-ignore\n    var __LOCATIONS_MAP__ = {\"Default\":{\"startLoc\":{\"col\":47,\"line\":61},\"endLoc\":{\"col\":2,\"line\":65},\"startBody\":{\"col\":47,\"line\":61},\"endBody\":{\"col\":2,\"line\":65}}};\n    \nimport { moduleMetadata, Story, Meta } from '@storybook/angular';\r\nimport { CommonModule, DatePipe, DecimalPipe } from '@angular/common';\r\n\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\nimport { NgxPaginationModule, PaginationInstance } from 'ngx-pagination';\r\nimport { ColumnFilterComponent } from '../app/components/columns/column-filter/column-filter.component';\r\nimport { ColumnFormComponent } from '../app/components/columns/column-form/column-form.component';\r\nimport { ColumnsService } from '../app/components/columns/columns.service';\r\nimport { FormService } from '../app/components/form/services/form.service';\r\nimport { PaginationComponent } from '../app/components/pagination/pagination.component';\r\nimport { StatusComponent } from '../app/components/status/status.component';\r\nimport { TableComponent } from '../app/components/table/table.component';\r\nimport { TableService } from '../app/components/table/table.service';\r\nimport { TypographyComponent } from '../app/components/typography/typography.component';\r\nimport { TableExComponent } from '../app/examples/table-ex/table-ex.component';\r\nimport { ClassesDirective } from '../app/utilities/directives/classes.directive';\r\nimport { AssetsModel } from '../app/utilities/models/assets.model';\r\nimport { AreaPipe } from '../app/utilities/pipes/area.pipe';\r\nimport { FormatPipe } from '../app/utilities/pipes/format.pipe';\r\nimport { MaterialModule } from '../material/material.module';\r\nimport { ColumnModel } from '../app/components/columns/column.model';\r\n\r\nexport default {\r\n  title: 'Table',\r\n  component: TableExComponent,\r\n  decorators: [\r\n    moduleMetadata({\r\n      declarations: [\r\n        TableComponent,\r\n        StatusComponent,\r\n        ColumnFilterComponent,\r\n        ColumnFormComponent,\r\n        PaginationComponent,\r\n        TypographyComponent,\r\n        ClassesDirective,\r\n        FormatPipe,\r\n        AreaPipe,\r\n      ],\r\n      providers: [\r\n        FormService,\r\n        TableService,\r\n        ColumnsService,\r\n        FormatPipe,\r\n        AreaPipe,\r\n        DatePipe,\r\n        DecimalPipe,\r\n      ],\r\n      imports: [\r\n        ReactiveFormsModule,\r\n        BrowserAnimationsModule,\r\n        FormsModule,\r\n        CommonModule,\r\n        NgxPaginationModule,\r\n        MaterialModule,\r\n      ],\r\n    }),\r\n  ],\r\n} as Meta;\r\n\r\nconst Template: Story<TableExComponent<any>> = (\r\n  args: TableExComponent<any>\r\n) => ({\r\n  props: args,\r\n});\r\n\r\nconst pagination: PaginationInstance = {\r\n  itemsPerPage: 6,\r\n  currentPage: 1,\r\n  totalItems: 12,\r\n};\r\n\r\nconst { data, columns, options } = {\r\n  data: [\r\n    {\r\n      id: 20,\r\n      block: 20,\r\n      division: 10,\r\n      subdivision: 0,\r\n      area: 2692,\r\n      areaOwn: 748,\r\n      property: '',\r\n      status: {\r\n        label: 'ממתין לטיפול עורך דין',\r\n        value: 4,\r\n      },\r\n      description: '',\r\n      location: 'קריית שמונה',\r\n    },\r\n    {\r\n      id: 20,\r\n      block: 20,\r\n      division: 20,\r\n      subdivision: 0,\r\n      area: 2692,\r\n      areaOwn: null,\r\n      property: '',\r\n      status: {\r\n        label: 'שוריין ע\"י פיננסים',\r\n        value: 5,\r\n      },\r\n      description: '',\r\n      location: 'קריית שמונה',\r\n    },\r\n    {\r\n      id: 24,\r\n      block: 24,\r\n      division: 20,\r\n      subdivision: 0,\r\n      area: 2692,\r\n      areaOwn: null,\r\n      property: '',\r\n      status: {\r\n        label: 'ממתין לרו\"ח',\r\n        value: 3,\r\n      },\r\n      description: '',\r\n      location: 'קריית שמונה',\r\n    },\r\n    {\r\n      id: 20,\r\n      block: 20,\r\n      division: 54,\r\n      subdivision: 0,\r\n      area: 1037,\r\n      areaOwn: null,\r\n      property: '',\r\n      status: {\r\n        label: 'התקבלה עסקה חדשה',\r\n        value: 1,\r\n      },\r\n      description: '',\r\n      location: 'קריית שמונה',\r\n    },\r\n    {\r\n      id: 20,\r\n      block: 20,\r\n      division: 20,\r\n      subdivision: 0,\r\n      area: 680,\r\n      areaOwn: null,\r\n      property: '',\r\n      status: {\r\n        label: 'ממתין לפיננסים',\r\n        value: 1,\r\n      },\r\n      description: '',\r\n      location: 'קריית שמונה',\r\n    },\r\n    {\r\n      id: 20,\r\n      block: 20,\r\n      division: 20,\r\n      subdivision: 0,\r\n      area: 2692,\r\n      areaOwn: 748,\r\n      property: '',\r\n      status: {\r\n        label: 'ממתין לטיפול עורך דין',\r\n        value: 4,\r\n      },\r\n      description: '',\r\n      location: 'קריית שמונה',\r\n    },\r\n  ],\r\n  columns: [\r\n    new ColumnModel({ label: 'גוש', type: 'number' }),\r\n    new ColumnModel({ label: 'חלקה', type: 'number' }),\r\n    new ColumnModel({ label: 'תת חלקה', type: 'number' }),\r\n    new ColumnModel({ label: 'שטח מ\"ר', type: 'number' }),\r\n    new ColumnModel({ label: 'שטח בבעלות הימנותא', type: 'number' }),\r\n    new ColumnModel({ label: 'זכות במס', type: 'text' }),\r\n    new ColumnModel({ label: 'סטטוס', type: 'custom', center: true }),\r\n    new ColumnModel({ label: 'תיאור', type: 'text' }),\r\n    new ColumnModel({ label: 'יישוב', type: 'text' }),\r\n  ],\r\n  options: {\r\n    pagination: pagination,\r\n    filters: ['id', '_constructor-name_'],\r\n  },\r\n};\r\n\r\nexport const Default = Template.bind({});\r\nDefault.args = {\r\n  data: data,\r\n  columns: columns,\r\n  model: new AssetsModel(),\r\n  options: options,\r\n};\r\n\r\n\n\n\nDefault.parameters = { storySource: { source: \"(\\r\\n  args: TableExComponent<any>\\r\\n) => ({\\r\\n  props: args,\\r\\n})\" }, ...Default.parameters };","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { SelectOption } from '../../form/models/question-select.model';\r\nimport { ColumnModel } from '../column.model';\r\n\r\n@Component({\r\n  selector: 'app-column-filter',\r\n  template: (require('./column-filter.component.html').default || require('./column-filter.component.html')).length ? (require('./column-filter.component.html').default || require('./column-filter.component.html')) : '',\r\n})\r\nexport class ColumnFilterComponent implements OnInit {\r\n  @Input() column: ColumnModel;\r\n  public label: string;\r\n  public options: SelectOption[];\r\n\r\n  @Output() optionSelect: EventEmitter<any> = new EventEmitter();\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {\r\n    this.label = this.column.label;\r\n    this.options = this.column.filterOptions;\r\n  }\r\n\r\n  public onOptionSelect(value) {\r\n    this.optionSelect.emit(value);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ColumnModel } from './column.model';\r\n\r\nexport interface ColumnsData<T> {\r\n  columns: ColumnModel[];\r\n  columnsDefs: (string| keyof T)[];\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ColumnsService<T> {\r\n  constructor() {}\r\n\r\n  private setColumnDefsFromType(model: T): string[] {\r\n    return Object.keys(model);\r\n  }\r\n\r\n  private filterColumnDefs(columnDefs: (string| keyof T)[], filters: [keyof T | string]): (string| keyof T)[] {\r\n    return columnDefs.filter((item) => !filters.includes(item));\r\n  }\r\n\r\n  private setColumnDefs(model: T, filters: [keyof T | string]): (string| keyof T)[] {\r\n    return this.filterColumnDefs(this.setColumnDefsFromType(model), filters);\r\n  }\r\n\r\n  private setColumnWithColumnDefs(\r\n    columns: ColumnModel[],\r\n    columnDefs:  (string| keyof T)[]\r\n  ): ColumnModel[] {\r\n    return columns.map((column, i) => {\r\n      return new ColumnModel({\r\n        ...column,\r\n        columnDef: column.columnDef || columnDefs[i],\r\n      });\r\n    });\r\n  }\r\n\r\n  private setColumnDefsFromColumns(\r\n    columns: ColumnModel[],\r\n    columnDefs: (string| keyof T)[]\r\n  ):  (string| keyof T)[] {\r\n    if (columns.length > columnDefs.length) {\r\n      columnDefs = columns.map((column) => column.columnDef);\r\n    }\r\n    return columnDefs;\r\n  }\r\n\r\n  private initColumnsDefs(model, filters):  (string| keyof T)[] {\r\n    return this.setColumnDefs(model, filters);\r\n  }\r\n\r\n  private getColumnsDefs(columns: ColumnModel[], columnDefs: (string| keyof T)[]) {\r\n    return this.setColumnDefsFromColumns(columns, columnDefs);\r\n  }\r\n\r\n  public getColumns(\r\n    model: T,\r\n    filters: (string| keyof T)[],\r\n    tableColumns: ColumnModel[]\r\n  ): ColumnsData<T> {\r\n    const columnsDefs = this.initColumnsDefs(model, filters);\r\n    const columns = this.setColumnWithColumnDefs(tableColumns, columnsDefs);\r\n\r\n    return { columns, columnsDefs: this.getColumnsDefs(columns, columnsDefs) };\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":""}