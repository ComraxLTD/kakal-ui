"use strict";
globalThis["webpackHotUpdatelib_kakal_ui"]("main",{

/***/ "./src/lib/app/examples/layout-ex/layout-ex.component.ts":
/*!***************************************************************!*\
  !*** ./src/lib/app/examples/layout-ex/layout-ex.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LayoutExComponent": () => (/* binding */ LayoutExComponent)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! tslib */ "../../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "../../node_modules/rxjs/_esm2015/internal/operators/distinctUntilChanged.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "../../node_modules/rxjs/_esm2015/internal/operators/map.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ "../../node_modules/rxjs/_esm2015/internal/operators/switchMap.js");
/* harmony import */ var _components_menu_menu_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/menu/menu.service */ "./src/lib/app/components/menu/menu.service.ts");
/* harmony import */ var _components_navbar_navbar_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/navbar/navbar.service */ "./src/lib/app/components/navbar/navbar.service.ts");
/* harmony import */ var _screens_layout_layout_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../screens/layout/layout.service */ "./src/lib/app/screens/layout/layout.service.ts");
/* harmony import */ var _utilities_services_route_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utilities/services/route.service */ "./src/lib/app/utilities/services/route.service.ts");
var _a, _b, _c, _d, _e;







let LayoutExComponent = class LayoutExComponent {
    constructor(landService, menuService, navbarService, layoutService, routerService, projectPrefix) {
        this.landService = landService;
        this.menuService = menuService;
        this.navbarService = navbarService;
        this.layoutService = layoutService;
        this.routerService = routerService;
        this.projectPrefix = projectPrefix;
        // NAVBAR SECTION
        this.headers = { lands: 'מקרקעין', neches: 'מנהלת ספר נכסים' };
        this.openIcon = 'treegradientlands';
        this.showStatusPath = [this.projectPrefix, 'neches'];
        this.direction = 'column';
        this.hideWizardPath = ['results', this.projectPrefix];
    }
    // ROUTE METHODS SECTION
    setCurrentPath() {
        const path = this.routerService.getCurrentPath();
        this.layoutService.emitCurrentPath(path);
    }
    ngOnInit() {
        this.setCurrentPath();
        this.setNavbar();
        this.steps$ = this.setWizard();
        this.menu$ = this.setMenu();
        this.subscribeToRouter();
    }
    ngOnDestroy() {
        if (this.pathSubscription) {
            this.pathSubscription.unsubscribe();
        }
    }
    setNavbar() {
        this.navbarService.setHeaders(this.headers);
        this.navbarService.emitStatus(this.landService.status);
        this.navbarService.setHeadersObs(this.setHeaders());
        this.logos = this.landService.logos;
    }
    setHeaders() {
        return this.routerService
            .getModulePrefixObs().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.distinctUntilChanged)(), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)((path) => this.headers[path]));
    }
    subscribeToRouter() {
        this.pathSubscription = this.routerService
            .getLastPathObs()
            .subscribe((path) => {
            path === this.projectPrefix && this.navbarService.emitTitle(path);
            this.layoutService.emitCurrentPath(path);
            this.routerService.currentPath$.next(path);
        });
    }
    setWizard() {
        return this.routerService
            .getModulePrefixObs().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)((path) => {
            const steps = this.landService.getSteps();
            steps.map((step) => {
                if (step.isActive) {
                    step.unactive();
                }
                if (step.path === path) {
                    step.active();
                }
            });
            return steps;
        }));
    }
    setMenu() {
        const modulePath$ = this.routerService.getModulePrefixObs();
        const lastPath$ = this.layoutService.getCurrentPathObs();
        return modulePath$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.switchMap)((modulePath) => {
            return lastPath$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)((path) => {
                const menu = this.menuService.setMenu(this.menuService.getMenu(), modulePath, 'path', path);
                return menu;
            }));
        }));
        // return path$.pipe(
        //   // distinctUntilChanged(),
        //   map((path: string) => {
        //     console.log(path)
        //     return this.menuService.setList(this.menuService.getMenu(), 'path', path);
        //   })
        // )
    }
    onChangeModule(step) {
        const path = `${this.projectPrefix}/${step.path}`;
        this.routerService.navigate(path);
    }
    onChangeMenu(path) {
        path = `${this.projectPrefix}/${path}`;
        this.routerService.navigate(path);
    }
};
LayoutExComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_8__.Component)({
        selector: 'app-layout-ex',
        template: (__webpack_require__(/*! ./layout-ex.component.html */ "./src/lib/app/examples/layout-ex/layout-ex.component.html").default || __webpack_require__(/*! ./layout-ex.component.html */ "./src/lib/app/examples/layout-ex/layout-ex.component.html")).length ? (__webpack_require__(/*! ./layout-ex.component.html */ "./src/lib/app/examples/layout-ex/layout-ex.component.html").default || __webpack_require__(/*! ./layout-ex.component.html */ "./src/lib/app/examples/layout-ex/layout-ex.component.html")) : '',
        styles: [(__webpack_require__(/*! ./layout-ex.component.scss */ "./src/lib/app/examples/layout-ex/layout-ex.component.scss").default || __webpack_require__(/*! ./layout-ex.component.scss */ "./src/lib/app/examples/layout-ex/layout-ex.component.scss")).length ? (__webpack_require__(/*! ./layout-ex.component.scss */ "./src/lib/app/examples/layout-ex/layout-ex.component.scss").default || __webpack_require__(/*! ./layout-ex.component.scss */ "./src/lib/app/examples/layout-ex/layout-ex.component.scss")) : '']
    }),
    (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__param)(5, (0,_angular_core__WEBPACK_IMPORTED_MODULE_8__.Inject)(PROJECT_PREFIX)),
    (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__metadata)("design:paramtypes", [typeof (_a = typeof LandService !== "undefined" && LandService) === "function" ? _a : Object, typeof (_b = typeof _components_menu_menu_service__WEBPACK_IMPORTED_MODULE_0__.MenuService !== "undefined" && _components_menu_menu_service__WEBPACK_IMPORTED_MODULE_0__.MenuService) === "function" ? _b : Object, typeof (_c = typeof _components_navbar_navbar_service__WEBPACK_IMPORTED_MODULE_1__.NavbarService !== "undefined" && _components_navbar_navbar_service__WEBPACK_IMPORTED_MODULE_1__.NavbarService) === "function" ? _c : Object, typeof (_d = typeof _screens_layout_layout_service__WEBPACK_IMPORTED_MODULE_2__.LayoutService !== "undefined" && _screens_layout_layout_service__WEBPACK_IMPORTED_MODULE_2__.LayoutService) === "function" ? _d : Object, typeof (_e = typeof _utilities_services_route_service__WEBPACK_IMPORTED_MODULE_3__.RouterService !== "undefined" && _utilities_services_route_service__WEBPACK_IMPORTED_MODULE_3__.RouterService) === "function" ? _e : Object, String])
], LayoutExComponent);



/***/ }),

/***/ "./src/lib/app/utilities/services/route.service.ts":
/*!*********************************************************!*\
  !*** ./src/lib/app/utilities/services/route.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RouterService": () => (/* binding */ RouterService)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ "../../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "../../node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/_esm2015/internal/Subject.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "../../node_modules/rxjs/_esm2015/internal/operators/filter.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ "../../node_modules/rxjs/_esm2015/internal/operators/map.js");
var _a, _b;






let RouterService = class RouterService {
    constructor(router, location) {
        this.router = router;
        this.location = location;
        this.$modulePrefix = new rxjs__WEBPACK_IMPORTED_MODULE_0__.Subject();
        this.history = [];
        this.subscribeToRoute();
    }
    goBack() {
        this.history.pop();
        if (this.history.length > 0) {
            this.location.back();
        }
        else {
            this.router.navigateByUrl('/');
        }
    }
    getCurrentPath() {
        return this.setLastPath(this.router.url);
    }
    subscribeToRoute() {
        return this.router.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.filter)((event) => event instanceof _angular_router__WEBPACK_IMPORTED_MODULE_2__.NavigationEnd), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((event) => {
            this.history.push(event.urlAfterRedirects);
            this.currentRoute = event.utl;
            return event.url;
        }));
    }
    getLastPathObs() {
        return this.subscribeToRoute().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((path) => this.setLastPath(path)));
    }
    async navigate(path) {
        try {
            await this.router.navigateByUrl(path);
        }
        catch (err) {
            console.log(err);
        }
    }
    setLastPath(url) {
        const path = url.split('/');
        return path[path.length - 1];
    }
    getModulePrefixObs() {
        return this.$modulePrefix.asObservable();
    }
    emitModulePrefix(path) {
        this.$modulePrefix.next(path);
    }
};
RouterService = (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.Injectable)({
        providedIn: 'root',
    }),
    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)("design:paramtypes", [typeof (_a = typeof _angular_router__WEBPACK_IMPORTED_MODULE_2__.Router !== "undefined" && _angular_router__WEBPACK_IMPORTED_MODULE_2__.Router) === "function" ? _a : Object, typeof (_b = typeof _angular_common__WEBPACK_IMPORTED_MODULE_6__.Location !== "undefined" && _angular_common__WEBPACK_IMPORTED_MODULE_6__.Location) === "function" ? _b : Object])
], RouterService);



/***/ })

});
//# sourceMappingURL=main.b7bb7360f5d3879d3764.hot-update.js.map