<div fxLayout="column" [class.kkl-form-search]="true">
  <div fxLayout="row" fxLayoutAlign="space-between center">
    <kkl-form-autocomplete
      fxFlex="90"
      [control]="searchControl"
    ></kkl-form-autocomplete>

    <div kkl-form-button>
      <button
        [disableRipple]="true"
        mat-icon-button
        kkl-action-button
        (click)="onClick()"
      >
        <kkl-icon
          [size]="3"
          [key]="
            expended ? 'keyboard_double_arrow_up' : 'keyboard_double_arrow_down'
          "
        ></kkl-icon>
      </button>
    </div>
  </div>
  <mat-accordion [class.kkl-form-search]="true" displayMode="flat">
    <mat-expansion-panel
      [class.kkl-form-search]="true"
      [class.mat-elevation-z0]="true"
      [expanded]="expended"
    >
      <ng-container
        *ngTemplateOutlet="formTemplate || defaultTemplate; context : { $implicit: {questions, formGroup}}"
      ></ng-container>
      <!-- <div fxLayout="row wrap" fxLayoutAlign="start center">
        <ng-container
          *ngFor="
            let item of inputs;
            let odd = odd;
            let even = even;
            let first = first;
            let last = last;
            let i = index
          "
        >
          <div
            [class.input]="true"
            [class.odd]="odd"
            [class.even]="even"
            [fxFlex]="flex"
          >
            <kkl-form-autocomplete [control]="control"></kkl-form-autocomplete>
          </div>
        </ng-container>
      </div> -->
    </mat-expansion-panel>
  </mat-accordion>
</div>

<ng-template #defaultTemplate let-context>
  <kkl-flex-form
    [questions]="context.questions"
    [formGroup]="context.formGroup"
  ></kkl-flex-form>
</ng-template>
