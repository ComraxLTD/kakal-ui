<div fxLayout="column" [class.kkl-form-search]="true">
  <header
    [class.kkl-form-search]="true"
    fxLayout="row"
    fxLayoutAlign="space-between center"
  >
    <kkl-form-autocomplete
      fxFlex="90"
      [control]="searchControl"
      (queryChanged)="onQueryChanged($event)"
      (multiOptionsSelected)="onMultiOptionSelected($event)"
      (optionSelected)="onOptionSelected($event)"
    ></kkl-form-autocomplete>

    <div kkl-form-button *ngIf="advanced">
      <button
        [disableRipple]="true"
        mat-icon-button
        kkl-action-button
        (click)="onClick()"
      >
        <kkl-icon
          [size]="3"
          [key]="
            expended ? 'keyboard_double_arrow_up' : 'keyboard_double_arrow_down'
          "
        ></kkl-icon>
      </button>
    </div>
  </header>
  <main>
    <mat-accordion [class.kkl-form-search]="true" displayMode="flat">
      <mat-expansion-panel
        [class.kkl-form-search]="true"
        [class.mat-elevation-z0]="true"
        [expanded]="expended"
      >
        <ng-container
          *ngTemplateOutlet="formSearchDirective?.template || defaultTemplate; context : { $implicit: contextGroup}"
        ></ng-container>
      </mat-expansion-panel>
    </mat-accordion>
  </main>
</div>

<ng-template #defaultTemplate let-context> please enter context </ng-template>
