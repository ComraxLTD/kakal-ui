<form fxLayout="row wrap" fxLayoutAlign="start center" [formGroup]="formGroup">
  <ng-container *ngFor="let question of questions; let index = index">
    <ng-container [ngSwitch]="question.controlType">
      <div
        [class.input]="true"
        [class.odd]="odd"
        [class.even]="even"
        [fxFlex]="flex"
      >
        <!-- SELECT INPUT SECTION -->
        <ng-container *ngSwitchCase="'select'">
          <kkl-form-select
            [control]="formGroup.controls[question.key]"
            [key]="question?.key"
            [multi]="question?.multi"
            [options]="question?.options"
            [index]="index"
            [label]="question?.label"
            [placeHolder]="question?.placeHolder"
            [theme]="question?.theme"
            [appearance]="question?.appearance"
            (focus)="onFocus($event)"
            [optionsSlot]="optionsSlot"
            (selected)="onSelect($event)"
          ></kkl-form-select>
        </ng-container>

        <!-- DATE INPUT SECTION -->
        <ng-container *ngSwitchCase="'date'">
          <kkl-form-date-range
            [formControl]="formGroup.controls[question.key]"
            [key]="question?.key"
            [range]="true"
            [label]="question?.label"
            [placeHolder]="question?.placeHolder"
            [maxDate]="question?.maxDate"
            [minDate]="question?.minDate"
            [appearance]="question?.appearance"
            [index]="index"
            (focus)="onFocus($event)"
          >
          </kkl-form-date-range>
        </ng-container>

        <!-- DATE INPUT SECTION -->
        <ng-container *ngSwitchCase="'range'">
          <kkl-form-range
            [formControl]="formGroup.controls[question.key]"
            [questions]="question.questions"
            [index]="index"
            [label]="question.label"
            [key]="question.key"
          ></kkl-form-range>
        </ng-container>
        <!-- DATE INPUT SECTION -->
        <ng-container *ngSwitchCase="'autocomplete'">
          <kkl-form-autocomplete
            (queryChanged)="onQueryChanged($event)"
            [key]="question?.key"
            [multi]="question.multi"
            [options]="question.options"
            [control]="formGroup.controls[question.key]"
            (multiOptionsSelected)="onMultiOptionSelected($event)"
            (optionSelected)="onOptionSelected($event)"
          ></kkl-form-autocomplete>
        </ng-container>

        <!-- FILE INPUT SECTION -->
        <ng-container *ngSwitchCase="'upload'">
          <kkl-form-upload
            [label]="question?.label"
            [multi]="question?.multi"
            [formControl]="formGroup.controls[question.key]"
            [index]="index"
          ></kkl-form-upload>
        </ng-container>

        <!-- CURRENCY INPUT SECTION -->
        <ng-container *ngSwitchCase="'currency'">
          <kkl-form-currency
            [control]="formGroup.controls[question.key]"
            [validations]="question?.validations"
            [index]="index"
          >
          </kkl-form-currency>
        </ng-container>

        <!-- DEFAULT INPUT -->
        <ng-container *ngSwitchDefault>
          <kkl-form-input
            [control]="formGroup.controls[question.key]"
            [key]="question?.key"
            [placeHolder]="question?.placeHolder"
            [theme]="question?.theme"
            [appearance]="question?.appearance"
            [cleave]="question?.cleave"
            [icon]="question?.icon"
            [label]="question?.label"
            [index]="index"
            (focus)="onFocus($event)"
            [controlType]="question?.controlType"
          ></kkl-form-input>
        </ng-container>
      </div>
    </ng-container>
  </ng-container>
</form>
