<div fxFill fxLayout="column" fxLayoutGap="1rem" dir="rtl">
  <!-- the checkbox will appear only if the "multi" value is set to true, the checkbox controls and presents weather all panels are open or not -->
  <header fxLayout="row" fxLayoutGap="3rem" fxLayoutAlign="end center">
    <mat-checkbox [color]="'primary'"> פתח הכול</mat-checkbox>
    <kkl-add-button *ngIf="buttonLabel">{{ buttonLabel }}</kkl-add-button>
  </header>

  <!-- the "multi" attribute determines weather the mat-accordion will allow multiple panels to open at the same time or not -->
  <main>
    <mat-accordion multi="multi">
      <ng-container *ngFor="let panel of panels; let index = i">
        <mat-expansion-panel
          [hideToggle]="true"
          [ngClass]="['default', 'mat-elevation-z0']"
        >
          <mat-expansion-panel-header>
            <mat-panel-title [ngClass]="['default']">
              <div class="title" fxLayout="row" fxLayoutGap="1rem">
                {{ panel | pluck: "label" }}
                <kkl-icon
                  [color]="'primary'"
                  [key]="expanded ? 'keyboard_arrow_down' : 'keyboard_arrow_up'"
                ></kkl-icon>
              </div>
            </mat-panel-title>
          </mat-expansion-panel-header>

          <div class="content">
            <ng-container
              *ngComponentOutlet="panel | pluck: 'comp'"
            ></ng-container>
          </div>
        </mat-expansion-panel>
      </ng-container>
    </mat-accordion>
  </main>
</div>
