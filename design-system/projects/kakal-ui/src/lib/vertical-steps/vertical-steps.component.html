<mat-stepper
  #stepper
  class="kkl-vertical-steps"
  orientation="vertical"
  [linear]="linear"
  [disableRipple]="true"
  (selectionChange)="onSelectionChanged($event)"
>
  <ng-container *ngFor="let step of steps; let i = index">
    <mat-step
      [completed]="step.completed"
      (interacted)="onInteractedStream($event)"
    >
      <ng-template matStepLabel>
        <kkl-typography [size]="2.4" color="primary" [weight]="600">
          {{ step.label }} .{{ i + 1 }}
        </kkl-typography>
      </ng-template>
      <div fxLayout="row" fxLayoutAlign="end">
        <div fxFlex="95">
          <ng-container
            *ngTemplateOutlet="templates[step.key]; context :{ $implicit :{step, index : i}}"
          ></ng-container>
        </div>
      </div>
    </mat-step>
  </ng-container>

  <!-- Icon overrides. -->
  <ng-template matStepperIcon="done">
    <mat-icon>done</mat-icon>
  </ng-template>
</mat-stepper>
