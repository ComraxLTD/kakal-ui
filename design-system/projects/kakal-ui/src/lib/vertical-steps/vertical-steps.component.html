<mat-stepper
  #stepper
  orientation="vertical"
  class="kkl-vertical-steps"
  [selectedIndex]="_selectedIndex"
  [linear]="true"
  [disableRipple]="true"
  (selectionChange)="onSelectionChanged($event)"
>
  <ng-container>
    <mat-step [completed]="true" *ngFor="let step of steps; let i = index">
      <ng-template matStepLabel>
        <div (click)="onStepClick(step)">
          <kkl-typography [size]="2.4" color="primary" [weight]="600">
            {{ step.label }} .{{ i + 1 }}
          </kkl-typography>
        </div>
      </ng-template>
      <div fxLayout="row" fxLayoutAlign="end">
        <div fxFlex="95">
          <ng-container
            *ngTemplateOutlet="templates[step.key]; context :{ $implicit :{step, index : i}}"
          ></ng-container>
        </div>
      </div>
    </mat-step>
  </ng-container>

  <!-- Icon overrides. -->
  <ng-template matStepperIcon="done">
    <mat-icon>done</mat-icon>
  </ng-template>
</mat-stepper>
