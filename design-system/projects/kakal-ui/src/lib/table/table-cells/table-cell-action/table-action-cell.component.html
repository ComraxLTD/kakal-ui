<div
  fxLayout="row"
  fxLayoutAlign="start center"
  dir="rtl"
  fxLayoutGap="1rem"
  fxFill
>
  <!-- slots buttons -->
  <ng-container>
    <ng-template
      *ngTemplateOutlet="
        startSlot;
        context: {
          $implicit: rowState
        }
      "
    ></ng-template>
  </ng-container>

  <ng-container *ngIf="buttonActionState$ | async as buttonState">
    <!-- edit button -->
    <ng-container *ngIf="buttonState.editState.show; else saveBlock">
      <button
        mat-icon-button
        [class.mat-raised-button]="buttonState.editState.disabled"
        (click)="onEdit()"
        matTooltip="ערוך"
        [disabled]="buttonState.editState.disabled"
      >
        <kkl-icon key="edit"></kkl-icon>
      </button>
    </ng-container>

    <!-- save button -->
    <ng-template #saveBlock>
      <button
        mat-raised-button
        class="kkl-save-button"
        (click)="onSave(buttonState.editState.event)"
        kkl-border
        [disabled]="!buttonState.editState.valid"
        matTooltip="שמור"
      >
        <kkl-typography color="text" [disabled]="!buttonState.editState.valid">
          שמור
        </kkl-typography>
      </button>
      <button
        matTooltip="בטל"
        mat-icon-button
        (click)="onClose(buttonState.editState.event)"
        matTooltip="בטל"
      >
        <kkl-icon key="cancel"></kkl-icon>
      </button>
    </ng-template>

    <!-- delete button -->
    <ng-container *ngIf="buttonState.deleteState.show">
      <button
        mat-icon-button
        (click)="onDelete()"
        [class.mat-raised-button]="buttonState.deleteState.disabled"
        [disabled]="buttonState.deleteState.disabled"
        matTooltip="מחק"
      >
        <kkl-icon key="delete"></kkl-icon>
      </button>
    </ng-container>
  </ng-container>

  <!-- slots buttons -->
  <ng-container>
    <ng-template
      *ngTemplateOutlet="
        endSlot;
        context: {
          $implicit: rowState
        }
      "
    ></ng-template>
  </ng-container>
</div>
