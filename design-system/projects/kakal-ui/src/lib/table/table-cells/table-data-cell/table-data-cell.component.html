<div fxFill [class.kkl-data-cell]="true">
  <!-- Default cell -->
  <ng-container
    *ngIf="tableState.editing.indexOf(row[key]) === -1; else editBlock"
  >
    <ng-container *ngIf="!cellTemplate[column.columnDef]; else customBlock">
      <kkl-typography>
        {{ row[column.columnDef] | format: column?.format }}
      </kkl-typography>
    </ng-container>
  </ng-container>

  <!-- Edit block -->
  <ng-template #editBlock>
    <ng-container
      *ngTemplateOutlet="inputTemplate[column.columnDef]; context : {$implicit :{row, column, rowIndex, key, group : tableState.forms[row[key]]}} "
    ></ng-container>
  </ng-template>

  <!-- Custom cell -->
  <ng-template #customBlock>
    <ng-container
      *ngTemplateOutlet="cellTemplate[column.columnDef]; context : {$implicit : {row, column, rowIndex, key}} "
    ></ng-container>
  </ng-template>
</div>
