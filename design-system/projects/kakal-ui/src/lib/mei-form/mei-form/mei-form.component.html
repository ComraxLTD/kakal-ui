<form (ngSubmit)="onSubmitEvent()" [formGroup]="formGroup">
  <ng-container *ngFor="let question of myQuestions; let index = index">
    <ng-container [ngSwitch]="question.controlType">

      <!-- SELECT INPUT SECTION -->
      <ng-container *ngSwitchCase="'select'">
          <mei-select
            [control]="formGroup.controls[question.key]"
            [options]="question.options"
            [multi]="question.multi"
            [placeHolder]="question.placeHolder"
            [key]="question.key"
            [label]="question.label"
            [theme]="question.theme"
            [appearance]="question.appearance"
            [disabled]="question.disabled"
            (selectChanged)="onSelectChanged($event)"
            (openChanged)="onOpenChanged($event)"
          ></mei-select>
      </ng-container>
      <ng-container *ngSwitchCase="'autocomplete'">
        <ng-container *ngIf="question.multi; else simpleAutocomplete">
          <mei-multi-autocomplete
            [control]="formGroup.controls[question.key]"
            [options]="question.options"
            [placeHolder]="question.placeHolder"
            [key]="question.key"
            [label]="question.label"
            [debounce]="question.debounce"
            [appearance]="question.appearance"
            [disabled]="question.disabled"
            [withButton]="question.withButton"
            [icon]="question.icon"
            [panelWidth]="question.panelWidth"
            (queryChanged)="onQueryChanged($event)"
            (selectChanged)="onSelectChanged($event)"
            (openChanged)="onOpenChanged($event)">
          </mei-multi-autocomplete>
        </ng-container>
        <ng-template #simpleAutocomplete>
          <mei-autocomplete
            [control]="formGroup.controls[question.key]"
            [options]="question.options"
            [placeHolder]="question.placeHolder"
            [key]="question.key"
            [label]="question.label"
            [debounce]="question.debounce"
            [appearance]="question.appearance"
            [disabled]="question.disabled"
            [withButton]="question.withButton"
            [icon]="question.icon"
            [panelWidth]="question.panelWidth"
            (queryChanged)="onQueryChanged($event)"
            (selectChanged)="onSelectChanged($event)"
            (openChanged)="onOpenChanged($event)"
          ></mei-autocomplete>
        </ng-template>
      </ng-container>

    </ng-container>
  </ng-container>


</form>
