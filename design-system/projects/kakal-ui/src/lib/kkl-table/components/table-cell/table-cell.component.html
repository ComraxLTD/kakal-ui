<ng-container *ngIf="question.cellTemplate; else noTemplate">
  <div [ngSwitch]="question.cellTemplate">
    <div *ngSwitchDefault>
      <ng-container
        *ngTemplateOutlet="
          colsTemplate[question.cellTemplate];
          context: { $implicit: data }
        "
      ></ng-container>
    </div>
  </div>
</ng-container>
<ng-template #noTemplate>
  <span 
    fxLayout="row"
    plContentAlignment 
    [justifyContent]="{
      isMobile, 
      isNumber: 
        question.controlType === 'number' || 
        question.controlType === 'sum'
    }"
  >
    <kkl-icon 
      *ngIf="question.colIcon" 
      color="primary" 
      [key]="question.colIcon" 
      style="display: inline-block; padding-left: 8px"
    ></kkl-icon>
    <span 
      style="width: 100%;" 
      *ngIf="question.button; 
      else withoutButton"
    >
      <button 
        style="width: 100%; padding: 0;" 
        mat-button 
        color="primary" 
        (click)="buttonClick()"
      >
        <span 
          fxLayoutAlign="start center" 
          plContentAlignment 
          [buttonJustifyContent]="{
            isMobile, 
            isNumber: 
              question.controlType === 'number' || 
              question.controlType === 'sum'
          }"
        >
          <span 
              *ngIf="data" 
              fxLayout="row" 
              style="white-space: pre-wrap; line-height: normal;"
            >
            <span style="border-bottom: 1px solid;">
              {{
                question.button?.label
                  ? question.button.label
                  : (data | tableCellPipe: question.controlType)
              }}
            </span>
          </span>
          <kkl-icon 
            style="padding: 0 10px;" 
            [color]="'primary'" 
            *ngIf="
              question.button.icon || 
              question.button.type === 'inlineExpand'
            " 
            [key]="question.button.icon || 'expand_more'"
          ></kkl-icon>
        </span>
      </button>
    </span>
    <ng-template #withoutButton>
      <div 
        *ngIf="data" 
        style="white-space: pre-wrap; margin-top: 1px"
      >
        <span>
          {{ data | tableCellPipe: question.controlType }}
        </span>
      </div>
    </ng-template>
  </span>
</ng-template>
