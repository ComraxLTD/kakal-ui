<ng-container
  *ngTemplateOutlet="column.cellTemplate ? colsTemplate[column.cellTemplate] : defaultTemplate;
  context: { $implicit: data, row, columnKey }"
></ng-container>
<ng-template #defaultTemplate>
  <div dir="rtl" fxLayout="row" fxLayoutGap="1rem" fxLayoutAlign="start center">
    <ng-container *ngIf="!column.button">
      <kkl-typography [size]="1.4">
        {{ data | tableCellPipe: column.controlType }}
      </kkl-typography>

      <kkl-icon
        *ngIf="column.colIcon"
        color="primary"
        [key]="column.colIcon"
      ></kkl-icon>
    </ng-container>

    <ng-container *ngIf="column.button">
      <ng-container
        *ngTemplateOutlet="
          column.button.type === 'inlineExpand'
            ? expandButtonTemplate
            : defaultButtonTemplate;
          context: { $implicit: column }
        "
      ></ng-container>
    </ng-container>
  </div>
</ng-template>

<!-- <ng-container *ngIf="question.cellTemplate; else noTemplate">
  <div [ngSwitch]="question.cellTemplate">
    <div *ngSwitchDefault>
      <ng-container
        *ngTemplateOutlet="
          colsTemplate[question.cellTemplate];
          context: { $implicit: data, row, column }
        "
      ></ng-container>
    </div>
  </div>
</ng-container> -->
<ng-template #noTemplate>
  <span
    style="width: 100%; padding: 0 5px"
    fxLayout="row"
    fxLayoutAlign="start center"
  >
    <kkl-icon
      *ngIf="column.colIcon"
      color="primary"
      [key]="column.colIcon"
      style="display: inline-block; padding-left: 8px"
    ></kkl-icon>
    <span *ngIf="column.button; else withoutButton">
      <button mat-button color="primary" (click)="buttonClick()">
        <span fxLayoutAlign="start center">
          <span
            *ngIf="data"
            fxLayout="row"
            style="white-space: pre-wrap; line-height: normal"
          >
            <span style="border-bottom: 1px solid; text-align: start">
              {{
                column.button?.label
                  ? column.button.label
                  : (data | tableCellPipe: column.controlType)
              }}
            </span>
          </span>
          <kkl-icon
            style="padding: 0 10px"
            [color]="'primary'"
            *ngIf="column.button.icon || column.button.type === 'inlineExpand'"
            [key]="column.button.icon || 'expand_more'"
          ></kkl-icon>
        </span>
      </button>
    </span>
    <ng-template #withoutButton>
      <div
        *ngIf="data"
        style="white-space: pre-wrap; font-size: 14px !important"
      >
        <span>
          {{ data | tableCellPipe: column.controlType }}
        </span>
      </div>
    </ng-template>
  </span>
</ng-template>

<ng-template #defaultButtonTemplate let-column>
  <button class="table-button" mat-button color="primary" (click)="onClick()">
    <span class="button-text">
      {{
        column.button?.label
          ? column.button.label
          : (data | tableCellPipe: column.controlType)
      }}
    </span>
    <mat-icon
      [color]="'primary'"
      *ngIf="isSvg"
      [svgIcon]="column.button.icon"
    ></mat-icon>
    <mat-icon [color]="'primary'" *ngIf="!isSvg">{{
      column.button.icon
    }}</mat-icon>
  </button>
</ng-template>

<ng-template #expandButtonTemplate let-column>
  <button mat-button color="primary" (click)="onClick()">
    <span>
      {{
        column.button?.label
          ? column.button.label
          : (data | tableCellPipe: column.controlType)
      }}
    </span>
    <mat-icon [color]="'primary'">expand_more</mat-icon>
  </button>
</ng-template>
