<div
  fxLayout="column"
  fxFlexAlign="center center"
  (click)="$event.stopPropagation()"
>

  <ng-container *ngIf="question">

      <ng-container [ngSwitch]="question.controlType">


        <ng-container *ngSwitchCase="'select'">
          <kkl-select
            [control]="controlContainer.control.controls[question.key]"
            [options]="question.options"
            [multi]="question.multi"
            [placeHolder]="question.placeHolder"
            [key]="question.key"
            [label]="question.label"
            [theme]="question.theme"
            [appearance]="question.appearance"
            [disabled]="question.disabled"
            (selectChanged)="onSelectChanged($event, question)"
            (openChanged)="onOpenChanged($event)"
          ></kkl-select>
        </ng-container>
        <ng-container *ngSwitchCase="'autocomplete'">
          <ng-container *ngIf="question.multi; else simpleAutocomplete">
            <kkl-multi-autocomplete
              [control]="controlContainer.control.controls[question.key]"
              [options]="question.options"
              [placeHolder]="question.placeHolder"
              [key]="question.key"
              [label]="question.label"
              [debounce]="question.debounce"
              [appearance]="question.appearance"
              [disabled]="question.disabled"
              [withButton]="question.withButton"
              [icon]="question.icon"
              [panelWidth]="question.panelWidth"
              (queryChanged)="onQueryChanged($event)"
              (selectChanged)="onSelectChanged($event)"
              (openChanged)="onOpenChanged($event)">
            </kkl-multi-autocomplete>
          </ng-container>
          <ng-template #simpleAutocomplete>
            <kkl-autocomplete
              [control]="controlContainer.control.controls[question.key]"
              [options]="question.options"
              [placeHolder]="question.placeHolder"
              [key]="question.key"
              [label]="question.label"
              [debounce]="question.debounce"
              [appearance]="question.appearance"
              [disabled]="question.disabled"
              [withButton]="question.withButton"
              [icon]="question.icon"
              [panelWidth]="question.panelWidth"
              (queryChanged)="onQueryChanged($event)"
              (selectChanged)="onSelectChanged($event)"
              (openChanged)="onOpenChanged($event)"
            ></kkl-autocomplete>
          </ng-template>
        </ng-container>
        <ng-container *ngSwitchCase="'date'">
          <kkl-datepicker
            [control]="controlContainer.control.controls[question.key]"
            [key]="question.key"
            [label]="question.label"
            [placeHolder]="question.placeHolder"
            [maxDate]="question.maxDate"
            [minDate]="question.minDate"
            [appearance]="question.appearance"
            (focusChanged)="onFocusChanged($event)"
            (valueChanged)="onValueChanged($event)"
          ></kkl-datepicker>
        </ng-container>
        <ng-container *ngSwitchCase="'range'">
          <kkl-range-datepicker
            [groupControl]="controlContainer.control.controls[question.key]"
            [key]="question?.key"
            [label]="question?.label"
            [appearance]="question?.appearance"
            (focusChanged)="onFocusChanged($event)"
            (valueChanged)="onValueChanged($event)"
          ></kkl-range-datepicker>
        </ng-container>
        <ng-container *ngSwitchDefault>
          <kkl-input
            [control]="controlContainer.control.controls[question.key]"
            [label]="question.label"
            [key]="question.key"
            [placeHolder]="question.placeHolder"
            [theme]="question.theme"
            [appearance]="question.appearance"
            [icon]="question.icon"
            [controlType]="question.controlType"
            (focusChanged)="onFocusChanged($event)"
            (valueChanged)="onValueChanged($event)"
          ></kkl-input>
        </ng-container>

      </ng-container>
    </ng-container>

</div>
