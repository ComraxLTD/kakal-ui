<mat-toolbar class="kkl-navbar-bottom">
  <div class="nav-buttons"> 
    <div
      fxLayout="column"
      fxLayoutAlign="center start"
      *ngIf="showBack$ | async"
    >
      <button mat-mini-fab (click)="onPrevious()">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </div>
  <div fxFlex="grow" fxLayout="column" fxLayoutAlign="center center"></div>
  <div fxLayout="row" fxLayoutGap="2rem" fxLayoutAlign="end center">
    <!--save button -->
    <ng-container *ngIf="showSave$ | async">
      <button
        class="kkl-save-button"
        mat-raised-button
        kkl-border
        [thick]="2"
        (click)="onSave()"
      >
        {{ saveLabel || "שמור" }}
      </button>
    </ng-container>

    <!--next button -->
    <ng-container *ngIf="showNext$ | async">
      <button
        class="kkl-next-button"
        mat-raised-button
        [disabled]="disableNext$ | async"
        color="primary"
        (click)="onNext()"
      >
        {{ nextLabel$ | async }}
      </button>
    </ng-container>
  </div>

  <!-- MOBILE BUTTON FOR PORTION DRAWER -->
  <ng-container *ngIf="portion$ | async as portion">
    <ng-container
      *ngIf="portion.mobile && !endDrawer.opened && portion.hasButton"
    >
      <kkl-icon
        key="map_mobile"
        [size]="12"
        class="drawer-mobile-btn"
        (click)="endDrawer.toggle()"
      ></kkl-icon>
    </ng-container>
  </ng-container>

  <div class="center-container" fxLayout="column" fxLayoutAlign="center center">
    <ng-container *ngIf="showNextMiddle$ | async as nextMiddle">
      <ng-container *ngIf="nextMiddle.show">
        <button
          class="next-middle-btn"
          mat-fab
          [disabled]="!formGroup.valid"
          color="primary"
          (click)="onNextMiddle()"
        >
          <span>
            <ng-container *ngIf="nextMiddle.next; else saveTemp">{{
              nextLabel || "המשך"
            }}</ng-container>
            <ng-template #saveTemp>{{ saveLabel || "שמור" }}</ng-template>
          </span>
          <br />
          <kkl-icon [color]="'paper'" key="expand_more"></kkl-icon>
        </button>
      </ng-container>
    </ng-container>

    <mat-icon
      class="bottom_icon"
      [svgIcon]="bottomIcon"
      color="primary"
    ></mat-icon>
  </div>
</mat-toolbar>

<!-- <ng-container *ngIf="(showNextMiddle$ | async).show">
  <button
  class="kkl-next-button"
  mat-raised-button
    [disabled]="!formGroup.valid"
    color="primary"
    (click)="onNextMiddle()"
    >
    <ng-container *ngIf="(showNextMiddle$ | async).next; else saveTemp">{{
      nextLabel || "המשך"
    }}</ng-container>
    <ng-template #saveTemp>{{ "שמור" }}</ng-template>
  </button>
</ng-container> -->
<!-- </ng-container> -->
