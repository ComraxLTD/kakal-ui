<div fxLayout="column" fxLayoutAlign="center center">
  <div
    fxFill
    dir="rtl"
    [fxLayout]="direction"
    fxLayoutAlign.gt-sm="center center"
    fxLayoutAlign.lt-sm="space-evenly center"
    class="steps-container"
  >
    <ng-container
      *ngFor="let step of steps$ | async; let i = index; let last = last"
    >
      <div appSize [type]="variant" [size]="6" [step]="step">
        <ng-container *ngIf="!stepRef">
          <ng-container [ngSwitch]="variant">
            <ng-container *ngSwitchCase="'step'">
              <kkl-card-step
                (stepSelect)="onStepSelect(step)"
                [index]="i"
                [step]="step"
                [options]="options"
              ></kkl-card-step>
            </ng-container>
            <ng-container *ngSwitchCase="'status'">
              <kkl-card-status
                (stepSelect)="onStepSelect(step)"
                [i]="index"
                [status]="step"
                [options]="options"
              ></kkl-card-status>
            </ng-container>
          </ng-container>
          <ng-content></ng-content>
        </ng-container>

        <ng-container *ngTemplateOutlet="stepRef; context: { step: this.step }">
        </ng-container>
      </div>

      <div
        *ngIf="!last"
        [ngClass]="{
          'divider-step': variant === 'step',
          'divider-status': variant === 'status'
        }"
      ></div>
    </ng-container>
  </div>
</div>
