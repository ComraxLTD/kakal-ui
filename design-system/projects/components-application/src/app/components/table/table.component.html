<div fxFill dir="rtl">
  <kkl-table
    [data$]="data$"
    [itemKey]="itemKey"
    [columns$]="columns$"
    [cellTemplate]="{actions}"
    [formTemplate]="{input}"
    [hasActions]="true"
  >
    <ng-container *kklCell="let context">
      <kkl-table-cell
        fxLayout="row"
        fxLayoutAlign="start center"
        [row]="context.row"
        [kklTableCell]="context.column.columnDef"
        [key]="context.key"
        [column]="context.column"
        [tableState]="context.tableState"
        [cellTemplate]="{email}"
        [inputTemplate]="{input}"
      ></kkl-table-cell>
    </ng-container>
  </kkl-table>
</div>

<ng-template #email let-rowState>
  <kkl-typography color="primary" underline="true">
    {{ rowState.row.email }}
  </kkl-typography>
</ng-template>

<ng-template #input let-rowState>
  <div fxFill fxLayout="row">
    <kkl-form-cell
      fxFlex="65"
      [group]="rowState.group"
      [columnDef]="rowState.column.columnDef"
    ></kkl-form-cell>
  </div>
</ng-template>

<!-- use kkl-table-action for default actions -edit, delete and save -->
<ng-template #actions let-rowState let-tableState="tableState">
  <kkl-table-actions
    [hasEdit]="true"
    [hasDelete]="true"
    [rowState]="rowState"
    [dataSource]="tableDataSource"
    (edit)="onEditEvent($event)"
    (close)="onCloseEvent($event)"
    (save)="onSaveEvent($event)"
  ></kkl-table-actions>
</ng-template>
